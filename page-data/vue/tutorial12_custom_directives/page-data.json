{"componentChunkName":"component---src-templates-post-template-tsx","path":"/vue/tutorial12_custom_directives/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<blockquote>\n<p>본 글은 Udemy에서 제공하는 유료 강좌인 Vue.js Complete Guide를 수강하면서 정리한 내용입니다. 저작권 문제시 바로 글을 내리도록 하겠습니다.</p>\n</blockquote>\n<hr>\n<p>Vue에서는 DOM 엘리먼트를 조작하기위해 v-디렉티브를 사용합니다. 그런데 기본으로 제공되는 디렉티브 이외에 사용자가 정의하는 디렉티브를 만들 수는 없을까요?</p>\n<p>아래에서는 사용자 정의 디렉티브 적용 방법과 사용법에 대해 요약합니다.</p>\n<hr>\n<h2>커스텀 디렉티브는 언제 사용합니까?</h2>\n<ul>\n<li>기본으로 제공되는 디렉티브외에 DOM 엘리먼트를 내가 원하는대로 조작하고 싶을때</li>\n</ul>\n<h2>커스텀 디렉티브 적용 방법</h2>\n<ul>\n<li>전역 사용 혹은 로컬 사용</li>\n</ul>\n<h3>전역 사용</h3>\n<ul>\n<li><code class=\"language-text\">main.js</code> 파일에 작성</li>\n<li><code class=\"language-text\">Vue.directive('custom_directive', { })</code> 와 같은 형태로 커스텀 디렉티브 정의</li>\n</ul>\n<h3>로컬 사용</h3>\n<ul>\n<li>각 컴포넌트 파일에 작성</li>\n<li>인스턴스에 <code class=\"language-text\">directives{ custom_directive: { }}</code>를 정의</li>\n</ul>\n<hr>\n<h2>디렉티브 만들기</h2>\n<ul>\n<li>커스텀 디렉티브는 5가지의 <strong>훅 함수</strong> 와 3가지의 <strong>훅 전달인자</strong> 가 있음\n<ul>\n<li>훅 함수는 선택사항</li>\n<li>훅 전달인자는 3개 모두 pass를 해주되, 정의는 선택사항</li>\n</ul>\n</li>\n</ul>\n<h3>5가지 Hooks (훅 함수)</h3>\n<ol>\n<li><code class=\"language-text\">bind</code>\n<ul>\n<li>디렉티브가 <strong>처음 바인딩 될 때, 1번 호출됨</strong></li>\n<li>필수 전달 인자\n<ul>\n<li><code class=\"language-text\">el</code></li>\n<li><code class=\"language-text\">binding</code> = 수정 금지</li>\n<li><code class=\"language-text\">vnode</code> = 수정 금지</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><code class=\"language-text\">inserted</code>\n<ul>\n<li>디렉티브가 적용된 엘리먼트가 <strong>부모 노드에 삽입 되었을 때 호출</strong>\n<ul>\n<li>부모 노드의 존재 보장</li>\n</ul>\n</li>\n<li>필수 전달 인자\n<ul>\n<li><code class=\"language-text\">el</code></li>\n<li><code class=\"language-text\">binding</code></li>\n<li><code class=\"language-text\">vnode</code></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><code class=\"language-text\">update</code>\n<ul>\n<li>적용된 <strong>엘리먼트를 포함한 컴포넌트가 업데이트된 후 호출</strong>\n<ul>\n<li>자식 업데이트는 확인 안함</li>\n</ul>\n</li>\n<li>필수 전달 인자\n<ul>\n<li><code class=\"language-text\">el</code></li>\n<li><code class=\"language-text\">binding</code></li>\n<li><code class=\"language-text\">vnode</code></li>\n<li><code class=\"language-text\">oldVnode</code></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><code class=\"language-text\">componentUpdated</code>\n<ul>\n<li>적용된 <strong>엘리먼트를 포함하는 컴포넌트 + 자식 컴포넌트들이 업데이트 된 후 호출</strong></li>\n<li>필수 전달 인자\n<ul>\n<li><code class=\"language-text\">el</code></li>\n<li><code class=\"language-text\">binding</code></li>\n<li><code class=\"language-text\">vnode</code></li>\n<li><code class=\"language-text\">oldVnode</code></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><code class=\"language-text\">unbind</code>\n<ul>\n<li>디렉티브가 <strong>엘리먼트에서 적용이 해제 될 때 1번 호출</strong></li>\n<li>필수 전달 인자\n<ul>\n<li><code class=\"language-text\">el</code></li>\n<li><code class=\"language-text\">binding</code></li>\n<li><code class=\"language-text\">vnode</code></li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n<h3>3가지 Passing Arguments (훅 전달인자)</h3>\n<ol>\n<li><code class=\"language-text\">el</code>\n<ul>\n<li>디렉티브가 바인딩 할 엘리먼트</li>\n</ul>\n</li>\n<li><code class=\"language-text\">binding</code>은 6가지 속성을 가진 객체\n<ul>\n<li><code class=\"language-text\">name</code>\n<ul>\n<li>디렉티브의 이름을 정의 (<code class=\"language-text\">v-</code> 없이 이름만!)</li>\n</ul>\n</li>\n<li><code class=\"language-text\">value</code>\n<ul>\n<li>디렉티브에서 전달받은 값</li>\n</ul>\n</li>\n<li><code class=\"language-text\">oldValue</code>\n<ul>\n<li>이전 값</li>\n<li><code class=\"language-text\">update</code> 및 <code class=\"language-text\">componentUpdated</code>에서만 사용 가능</li>\n</ul>\n</li>\n<li><code class=\"language-text\">expression</code>\n<ul>\n<li>표현식 문자열</li>\n</ul>\n</li>\n<li><code class=\"language-text\">arg</code>\n<ul>\n<li>디렉티브 전달인자 (있는 경우만 존재)</li>\n</ul>\n</li>\n<li><code class=\"language-text\">modifiers</code>\n<ul>\n<li>포함된 수식어 객체</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><code class=\"language-text\">vnode</code>\n<ul>\n<li>Vue 컴파일러가 만든 버추얼 노드</li>\n<li>아직 뭔말인지 모르겠음…</li>\n</ul>\n</li>\n<li><code class=\"language-text\">oldVnode</code>\n<ul>\n<li>이전의 버추얼 노드</li>\n<li><code class=\"language-text\">update</code> 및 <code class=\"language-text\">componentUpdated</code>에서만 사용 가능</li>\n</ul>\n</li>\n</ol>\n<h2>주의사항</h2>\n<ul>\n<li>모든 전달인자는 읽기 전용으로 사용! (변경 금지)</li>\n</ul>\n<hr>\n<h3>사용예시 1. 배경색 적용</h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// 전역 등록 방법입니다.</span>\r\nVue<span class=\"token punctuation\">.</span><span class=\"token function\">directive</span><span class=\"token punctuation\">(</span><span class=\"token string\">'highlight'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">el<span class=\"token punctuation\">,</span> binding<span class=\"token punctuation\">,</span> vnode</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    el<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>backgroundColor <span class=\"token operator\">=</span> binding<span class=\"token punctuation\">.</span>value\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- 아래의 문단에 배경색 적용 --></span>\r\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\"><span class=\"token namespace\">v-highlight:</span>background</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>red<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Hello World<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h3>사용예시 2. 배경색 및 글씨색 적용</h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// 전역 등록 방법입니다.</span>\r\n<span class=\"token comment\">// background에 바인딩하면 배경색 적용</span>\r\n<span class=\"token comment\">// 그렇지 않으면 글씨색을 적용</span>\r\nVue<span class=\"token punctuation\">.</span><span class=\"token function\">directive</span><span class=\"token punctuation\">(</span><span class=\"token string\">'highlight'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">el<span class=\"token punctuation\">,</span> binding<span class=\"token punctuation\">,</span> vnode</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>binding<span class=\"token punctuation\">.</span>arg <span class=\"token operator\">==</span> <span class=\"token string\">'background'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n      el<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>backgroundColor <span class=\"token operator\">=</span> binding<span class=\"token punctuation\">.</span>value\r\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n      el<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> binding<span class=\"token punctuation\">.</span>value\r\n    <span class=\"token punctuation\">}</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- 아래의 문단에 글씨색 적용 --></span>\r\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">v-highlight</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>red<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Hello World<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h3>사용예시 3. 수식어 사용</h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// 전역 등록 방법입니다.</span>\r\n<span class=\"token comment\">// 3초의 딜레이 후에 색 변경</span>\r\nVue<span class=\"token punctuation\">.</span><span class=\"token function\">directive</span><span class=\"token punctuation\">(</span><span class=\"token string\">'highlight'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">el<span class=\"token punctuation\">,</span> binding<span class=\"token punctuation\">,</span> vnode</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">var</span> delay <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\r\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>binding<span class=\"token punctuation\">.</span>modifiers<span class=\"token punctuation\">[</span><span class=\"token string\">'delayed'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n      delay <span class=\"token operator\">=</span> <span class=\"token number\">3000</span> <span class=\"token comment\">// 3초 딜레이</span>\r\n    <span class=\"token punctuation\">}</span>\r\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>binding<span class=\"token punctuation\">.</span>arg <span class=\"token operator\">==</span> <span class=\"token string\">'background'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        el<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>backgroundColor <span class=\"token operator\">=</span> binding<span class=\"token punctuation\">.</span>value\r\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n        el<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> binding<span class=\"token punctuation\">.</span>value\r\n      <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- 아래의 문단에 글씨색 적용 --></span>\r\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\"><span class=\"token namespace\">v-highlight:</span>background.delayed</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>red<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Hello World<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h3>사용예시 4: 다중 수식어 적용</h3>\n<ul>\n<li>추후 정리 예정</li>\n</ul>\n<hr>\n<p>Vue에서는 훅 함수와 훅 전달인자를 통해 사용자가 원하는 디렉티브를 만드는데 도움을 줍니다.\r\n조금 복잡할 수도 있지만, 대부분의 경우에 훅 전달인자는 <code class=\"language-text\">el</code>과 <code class=\"language-text\">binding</code>만 주로 사용한다고 기억하시면 될 듯 합니다.</p>\n<p>다음 글에서는 Vue-router, Vuex, Vuetify와 같은 라이브러리를 Vue 인스턴스에 전역으로 제공하는 플러그인에 대해 요약하려고 합니다.</p>\n<p>틀린 내용이 있다면 자유롭게 댓글로 달아주세요 :)</p>","frontmatter":{"title":"Vue.js 뽀개기 (12) 커스텀 디렉티브","excerpt":"사용자 정의 디렉티브를 만들어 DOM의 엘리먼트를 조작하는 법에 대해 요약하는 글입니다.","date":"2019.06.15.","category":"vue","thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAPABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAQHA//EABYBAQEBAAAAAAAAAAAAAAAAAAEFCP/aAAwDAQACEAMQAAABQVqO8vPstKWJ/8QAGRAAAwEBAQAAAAAAAAAAAAAAAAIEFBID/9oACAEBAAEFAkmXryiqRcxkHn7Mh//EACIRAAEBBgcAAAAAAAAAAAAAAAERAAIDFiIxEiEyUVJxkf/aAAgBAwEBPwGYIiGu+HdaStJsFs8uoZNMETmfem//xAAgEQABAwIHAAAAAAAAAAAAAAABABEhFjIzQVFSYWOh/9oACAECAQE/AaqL4rCHDnKQ2k3bhCqvs9PC/8QAJRAAAAQEBQUAAAAAAAAAAAAAAQIDEgAEETEQEyIyoRQhQWGC/9oACAEBAAY/Ai5gCyoPbub5p7Dm0LdaVMD54py2TtVl07zg1EWlmHFBFK5GKOE3aLYBoIWgU01t9GNxS8Wj/8QAHBABAQACAwEBAAAAAAAAAAAAEQEAITFxkVGx/9oACAEBAAE/IenPPJs2BuSwH04VvZWxLUmtQdXTHjrPZn6sjAOgbIG2uDq9mf/aAAwDAQACAAMAAAAQIP8A/8QAHREBAQABBAMAAAAAAAAAAAAAAREhQVFhcZGhwf/aAAgBAwEBPxAm2btGIgmVhMSiM9bq+uDx3P/EAB0RAQABBAMBAAAAAAAAAAAAAAERACExYUFRkfD/2gAIAQIBAT8QUCTMymd5OaS1hHipdOPo7fNNf//EABsQAQACAwEBAAAAAAAAAAAAAAEAESEx8BDR/9oACAEBAAE/EAOmhYSwV6tXyWUUGmjDjl/NZlUnqE7/ABh7GRxBASMMVHVwR4r/AP/Z"},"images":{"fallback":{"src":"/static/f7a2cb1b53db588bfdc14d4b5dcd2d35/ffa24/logo.jpg","srcSet":"/static/f7a2cb1b53db588bfdc14d4b5dcd2d35/d04ec/logo.jpg 256w,\n/static/f7a2cb1b53db588bfdc14d4b5dcd2d35/6f7c6/logo.jpg 512w,\n/static/f7a2cb1b53db588bfdc14d4b5dcd2d35/ffa24/logo.jpg 1024w","sizes":"(min-width: 1024px) 1024px, 100vw"},"sources":[{"srcSet":"/static/f7a2cb1b53db588bfdc14d4b5dcd2d35/e92ac/logo.webp 256w,\n/static/f7a2cb1b53db588bfdc14d4b5dcd2d35/dcf1b/logo.webp 512w,\n/static/f7a2cb1b53db588bfdc14d4b5dcd2d35/afeb4/logo.webp 1024w","type":"image/webp","sizes":"(min-width: 1024px) 1024px, 100vw"}]},"width":1024,"height":768}},"publicURL":"/static/f7a2cb1b53db588bfdc14d4b5dcd2d35/logo.jpeg"}}}}]}},"pageContext":{"slug":"/vue/tutorial12_custom_directives/"}},"staticQueryHashes":[],"slicesMap":{}}